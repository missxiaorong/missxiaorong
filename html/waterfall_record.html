<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Missxiaorong's home</title>

    <link rel="stylesheet" href="../stylesheets/styles.css">
    <link rel="stylesheet" href="../stylesheets/github-light.css">
    <script src="../javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <style>
        .wrapper h1{
            font-size:25px;
        }
        .script{
            height:100px;
            background-color: #D29BE7;
            text-align: left;
            margin: 10px;
        }
        xmp{
            margin-left: -15%;
        }
        .title_s{
            font-size: 16px;
            color: #666666;
        }
    </style>
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body>
<div class="wrapper">
    <header>
        <h1 class="header">Missxiaorong's home</h1>
        <p class="header">I love to pursue, to be myself.</p>

        <ul>
            <li><a class="buttons github" href="https://github.com/missxiaorong/missxiaorong">笔记</a></li>
            <li><a class="buttons github" href="https://github.com/missxiaorong/missxiaorong">收藏</a></li>
            <li><a class="buttons github" href="https://github.com/missxiaorong/missxiaorong">随记</a></li>
        </ul>

        <p class="header">sometimes life is about risking everything for a dream no one can see but you</p>
        <p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp--please never forgive</p>

    </header>
    <section>
        <h1>
            <a id="welcome-to-github-pages" class="anchor" aria-hidden="true"><span class="octicon octicon-link">瀑布流的延迟加载，无限下拉加载实现（一）</span></a></h1>
        <a href="waterfall_record2.html">下一篇文章：瀑布流的无限加载（二）</a><br/>

        <span>&nbsp&nbsp&nbsp&nbsp&nbsp瀑布流，又称瀑布流式布局。是比较流行的一种网站页面布局，视觉表现为参差不齐的多栏布局，随着页面滚动条向下滚动，这种布局还会不断加载数据块并附加至当前尾部。现在越来越多的网站使用了瀑布流布局，有不少可以实现的方法，可以直接使用插件。
这次学习做瀑布流主要借用了其他的插件，实现了图片瀑布流布局，图片延迟加载，以及无限滚动加载。</span>
        <p>图片延迟加载的好处是：<br/>1. 减少页面初次加载请求数；2. 减少初次加载完毕所需要的时间；3. 避免不必要的图片加载.
            <br/>在图片量较大的情况下是可以明显节省初次加载时间的， 可以避免不必要的资源浪费，页面下部可视视窗外的很多元素也许用户根本不会去查看，所以它们的背景图也不必加载，只有当用户看到它们时，才去加载。
            背景图片延时加载，有利于减少服务器压力。<br/>
            <a href="https://guides.github.com/features/mastering-markdown/">详细的完整步骤如下：</a><br/>图片的瀑布流布局，使用了masonry插件，延迟加载使用了lazyload插件，无限滚动加载使用了blocksit插件。<br/>
            jquery下载地址：<a href="http://jquery.com/">http://jquery.com/</a><br/>
             masonry插件下载的地址：<a href="http://masonry.desandro.com/">http://masonry.desandro.com/</a> <br/> 点击进去显示如下
            <img src="../images/img_1.png"></p>
            <p>
              lazyload插件下载的地址：<a href="http://plugins.jquery.com/lazyload//">http://plugins.jquery.com/lazyload/</a> <br/>
            然后在你的头文件添加(src中为你的js文件的路径）
            <div class="script">
                <xmp>
                    <script src="js/jquery.min.js"></script>
                    <script src="js/jquery.masonry.min.js"></script>
                    <script type="text/javascript" src="js/jquery.lazyload.min.js"></script>
                </xmp>
            </div>
           <span class="title_s">css代码：</span>
        <div style="height: auto;background-color: #C373E2;    margin: 10px;">
                <xmp class="code">

                    .container-fluid {
                    padding: 0px;

                    }
                    .box {
                    margin-bottom: 20px;
                    float: left;
                    width: 220px;
                    }
                    .box img {
                    max-width: 100%
                    }

                </xmp>
        </div>

        <span class="title_s">body代码：</span>
        <div style="height: 500px;background-color: #C373E2;    margin: 10px;">
        <xmp class="code">

                <div id="masonry" class="container-fluid">
                    <div class="box"><img src="loading.gif" data-original="images/4.jpg" /></div>
                    <div class="box"><img src="loading.gif" data-original="images/3.jpg" /></div>
                    <div class="box"><img src="loading.gif" data-original="images/2.jpg" /></div>
                    <div class="box"><img src="loading.gif" data-original="images/1.jpg" /></div>


                    <div id="load" style="display: none;">
                        <div class="box"><img src="loading.gif" data-original="images/9.jpg" /></div>
                        <div class="box"><img src="loading.gif" data-original="images/10.jpg" /></div>
                        <div class="box"><img src="loading.gif" data-original="images/6.jpg" /></div>
                        <div class="box"><img src="loading.gif" data-original="images/4.jpg" /></div>

                    </div>
                </div>
              </xmp>
            </div>
         <span class="title_s">js代码：</span>
        <div style="height:auto;background-color: #C373E2;    margin: 10px;">
        <xmp class="code">

                 <script type="text/javascript">
                    $(function() {

                        f_masonry();
                        $("img").lazyload({
                            effect:"fadeIn",
                            failurelimit:40,
                            load:f_masonry

                        });
                        $(".box").animate({width:220},"slow")
                        $(".box").fadeIn(2000);
                        function f_masonry() {
                            $('#masonry').masonry({
                                gutterWidth: 10,
                                itemSelector: '.box',
                                isAnimated: true
                            });
                        }
                        $(window).scroll(function () {
                            // 当滚动到最底部以上50像素时， 加载新内容
                            if ($(document).height() - $(this).scrollTop() - $(this).height() < 50) {
                                $('#masonry').append($("#load").html());
                                $('#masonry').BlocksIt({
                                    numOfCol: 5,
                                    offsetX: 8,
                                    offsetY: 8
                                });
                                $("img").lazyload();
                            }
                        });
                    });
                  </script>
        </xmp>
           </div>
        <a  style="margin-left: 40%" href="waterfall_1.html">点击查看瀑布流效果</a><br/><br/>

        <a  style="margin-left: 30%" href="waterfall_record2.html">下一篇文章：瀑布流的无限加载（二）</a>
        </p>


    </section>
    <footer>

    </footer>
</div>

<!--[if !IE]><script>fixScale(document);</script><![endif]-->

</body>


</html>
