<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Missxiaorong's home</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.masonry.min.js"></script>
    <script type="text/javascript" src="js/jquery.lazyload.min.js"></script>
    <script type="text/javascript" src="js/blocksit.min.js"></script>
    <style>
		 @media screen and (min-width: 500px) 
		 and (max-width: 700px){ #masonry{ width: 600px; }img{max-width:90px} }
        .container-fluid {
            padding: 0px;

        }
        /*放置图片*/
        .box {
            margin-bottom: 20px;
            float: left;
            width: 220px;
        }
        /*图片样式*/
        .box img {
            max-width: 100%
        }

    </style>

    <script type="text/javascript">
        window.onload = $(function() {
            f_masonry();
            $("img").lazyload({
                effect:"fadeIn", //淡出效果
                failurelimit:20,//插件找到 20 个不在可见区域的图片是才停止搜索
                load:f_masonry,

            });


            $(".box").animate({"opacity":"1"},999);//动画效果
            $(".box").fadeIn(300);//淡出
            function f_masonry() {
                $('#masonry #load').masonry({
                    itemSelector: '.box',
                    isAnimated: true
                });
            }
            $(window).scroll(function () {
                // 当滚动到最底部以上50像素时， 加载新内容
                if ($(document).height() - $(this).scrollTop() - $(this).height() < 200) {
                    $('#masonry').append($("#load").html());
                    $('#masonry').BlocksIt({
                        numOfCol:6, //图片显示六列
                        offsetX: 8,
                        offsetY: 8
                    });

                    $("img").lazyload(); //延迟加载
                }
            });
            var currentWidth = 1100;
            $(window).resize(function() {
                var winWidth = $(window).width();
                var conWidth;
                if(winWidth < 660) {
                    conWidth = 440;
                    col = 2
                } else if(winWidth < 880) {
                    conWidth = 660;
                    col = 3
                } else if(winWidth < 1100) {
                    conWidth = 880;
                    col = 4;
                } else {
                    conWidth = 1100;
                    col = 5;
                }

                if(conWidth != currentWidth) {
                    currentWidth = conWidth;
                    $('#masonry').width(conWidth);
                    $('#masonry').BlocksIt({
                        numOfCol: col,
                        offsetX: 8,
                        offsetY: 8
                    });
                }
            });
        });
    </script>
</head>
<body>

<div id="masonry" class="container-fluid">
    <div class="box"><img src="loading.gif" data-original="images/4.jpg" /></div>
    <div class="box"><img src="loading.gif" data-original="images/3.jpg" /></div>
    <div class="box"><img src="loading.gif" data-original="images/2.jpg" /></div>
    <div class="box"><img src="loading.gif" data-original="images/1.jpg" /></div>
    <div class="box"><img src="loading.gif" data-original="images/5.jpg" /></div>
    <div class="box"><img src="loading.gif" data-original="images/6.jpg" /></div>
    <div class="box"><img src="loading.gif" data-original="images/7.jpg" /></div>
    <div class="box"><img src="loading.gif" data-original="images/8.jpg" /></div>
    <div class="box"><img src="loading.gif" data-original="images/9.jpg" /></div>
    <div class="box"><img src="loading.gif" data-original="images/10.jpg" /></div>

 <div id="load" style="display: none;">
    <div class="box"><img src="loading.gif" data-original="images/9.jpg" /></div>
    <div class="box"><img src="loading.gif" data-original="images/10.jpg" /></div>
    <div class="box"><img src="loading.gif" data-original="images/6.jpg" /></div>
    <div class="box"><img src="loading.gif" data-original="images/4.jpg" /></div>
    <div class="box"><img src="loading.gif" data-original="images/3.jpg" /></div>
    <div class="box"><img src="loading.gif" data-original="images/2.jpg" /></div>
    <div class="box"><img src="loading.gif" data-original="images/1.jpg" /></div>
    <div class="box"><img src="loading.gif" data-original="images/7.jpg" /></div>
    <div class="box"><img src="loading.gif" data-original="images/8.jpg" /></div>


</div>


</div>

</body>
<script>

</script>
</html>
